<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebCrawler | Levellers</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="icon" href="/static/img/icon.png" />
  </head>

  <body>
    <!-- NAVBAR -->
    <header class="navbar">
      <div class="logo">ğŸ•·ï¸ <span>WebCrawler</span></div>
      <nav>
        <a href="#features">Features</a>
        <a href="#about">About</a>
        <a href="/login.html" class="btn">Login</a>
        <a href="/signup.html" class="btn primary">Sign Up</a>
      </nav>
    </header>

    <section class="hero">
      <div class="hero-content">
        <h1>CrawlğŸ¦€ ExtractğŸ‘¾ AnalyzeğŸ“œ</h1>
        <p>
          Power your data pipelines with an intelligent, scalable web crawler
          built for the modern web.
        </p>
        <br />

        <div class="cta">
        <button class="btncrawl" id="crawlBtn">Start Crawling</button>
        </div>

        <div id="result" style="margin-top: 20px; color: var(--normal)"></div>
      </div>
    </section>

    <section id="features" class="features">
      <h2>âš™ï¸ Core Features</h2>
      <div class="feature-grid">
        <div class="feature">
          <h3>Smart Crawling</h3>
          <p>
            Handles JavaScript-heavy pages using headless browsers with speed
            and efficiency.
          </p>
        </div>
        <div class="feature">
          <h3>Custom Extraction</h3>
          <p>
            Extract only what you need â€” metadata, content, or links â€” with
            flexible configurations.
          </p>
        </div>
        <div class="feature">
          <h3>Dashboard Insights</h3>
          <p>
            Track crawl progress, success rates, and export structured data in
            real time.
          </p>
        </div>
      </div>
    </section>

    <!-- ABOUT SECTION -->
    <section id="about" class="about">
      <div class="about-content">
        <h2>ğŸ§  About WebCrawler</h2>
        <p>
          WebCrawler | Levellers is an AI-driven platform that transforms the
          way we collect and understand web data. Designed for modern developers
          and data engineers, it intelligently crawls the internet, extracts
          structured information, and summarizes key insights in real time.
        </p>
        <p>
          Powered by Googleâ€™s Gemini AI, WebCrawler doesnâ€™t just scrape pages â€”
          it <strong>understands</strong> them.
        </p>
      </div>
    </section>

    <!-- FOOTER -->
    <footer>
      <p>Â© 2025 WebCrawler. Built by Levellers.</p>
    </footer>

    <script>
      const API_BASE = "https://web-crawler-backend-51dl.onrender.com";
      const crawlBtn = document.getElementById("crawlBtn");
      const resultDiv = document.getElementById("result");

      crawlBtn.addEventListener("click", async () => {
        resultDiv.innerText = "ğŸ” Checking session...";

        try {
          const res = await fetch(`${API_BASE}/api/auth/status`, {
            credentials: "include"
          });

          if (res.ok) {
            // Authenticated
            window.location.href = "/dashboard.html";
          } else {
            // Not authenticated
            resultDiv.innerText = "Please log in to start crawling.";
            setTimeout(() => {
              window.location.href = "/login.html";
            }, 800);
          }

        } catch (err) {
          console.error(err);
          resultDiv.innerText = "ğŸš¨ Server unreachable. Please try again later.";
        }
      });
  </script>
  </body>
</html>